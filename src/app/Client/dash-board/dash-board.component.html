<div class="dashboard-container">
  <h2>Tableau de bord</h2>

  <div class="error" *ngIf="errorMessage">{{ errorMessage }}</div>
  <div class="loading" *ngIf="loading">Chargement...</div>

  <div class="stats-grid" *ngIf="!loading">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-info">
        <h3>{{ stats.total }}</h3>
        <p>Total des livraisons</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">â³</div>
      <div class="stat-info">
        <h3>{{ stats.pending }}</h3>
        <p>En attente</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸšš</div>
      <div class="stat-info">
        <h3>{{ stats.inTransit }}</h3>
        <p>En transit</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">âœ…</div>
      <div class="stat-info">
        <h3>{{ stats.delivered }}</h3>
        <p>LivrÃ©es</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-info">
        <h3>{{ totalSpent.toFixed(2) }} TND</h3>
        <p>Total dÃ©pensÃ©</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-info">
        <h3>{{ getDeliveryPercentage() }}%</h3>
        <p>Taux de livraison</p>
      </div>
    </div>
  </div>

  <div class="recent-section" *ngIf="!loading">
    <div class="section-header">
      <h3>Livraisons rÃ©centes</h3>
      <a routerLink="/client/mypackage" class="view-all">Voir tout â†’</a>
    </div>

    <div class="recent-deliveries" *ngIf="recentDeliveries.length > 0; else noDeliveries">
      <div class="delivery-card" *ngFor="let delivery of recentDeliveries">
        <div class="delivery-header">
          <span class="delivery-id">#{{ delivery.id }}</span>
          <span class="status status-{{ getStatusClass(delivery.status) }}">
            {{ getStatusLabel(delivery.status) }}
          </span>
        </div>
        <p class="delivery-description">{{ delivery.description }}</p>
        <div class="delivery-route">
          <span class="city">{{ delivery.departureAddress.city }}</span>
          <span class="arrow">â†’</span>
          <span class="city">{{ delivery.arrivalAddress.city }}</span>
        </div>
        <div class="delivery-footer">
          <span class="date">{{ formatDate(delivery.createdAt) }}</span>
          <span class="type">{{ delivery.type }}</span>
        </div>
      </div>
    </div>

    <ng-template #noDeliveries>
      <div class="no-data">
        <p>Aucune livraison pour le moment.</p>
        <a routerLink="/client/ajoute-colis" class="btn-primary">CrÃ©er une livraison</a>
      </div>
    </ng-template>
  </div>

  <div class="quick-actions" *ngIf="!loading">
    <h3>Actions rapides</h3>
    <div class="actions-grid">
      <a routerLink="/client/ajoute-colis" class="action-card">
        <span class="action-icon">â•</span>
        <span class="action-text">Nouvelle livraison</span>
      </a>
      <a routerLink="/client/mypackage" class="action-card">
        <span class="action-icon">ğŸ“</span>
        <span class="action-text">Suivre mes colis</span>
      </a>
      <a routerLink="/client/factures" class="action-card">
        <span class="action-icon">ğŸ§¾</span>
        <span class="action-text">Mes factures</span>
      </a>
    </div>
  </div>
</div>
